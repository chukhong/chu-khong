"use strict";var dom=require("../lib/dom");function FoldHandler(n){n.on("click",function(e){var o=e.getDocumentPosition(),t=n.session,o=t.getFoldAt(o.row,o.column,1),o=(o&&(e.getAccelKey()?t.removeFold(o):t.expandFold(o),e.stop()),e.domEvent&&e.domEvent.target);o&&dom.hasCssClass(o,"ace_inline_button")&&dom.hasCssClass(o,"ace_toggle_wrap")&&(t.setOption("wrap",!t.getUseWrapMode()),n.renderer.scrollCursorIntoView())}),n.on("gutterclick",function(e){var o,t;"foldWidgets"==n.renderer.$gutterLayer.getRegion(e)&&(o=e.getDocumentPosition().row,(t=n.session).foldWidgets&&t.foldWidgets[o]&&n.session.onFoldWidgetClick(o,e),n.isFocused()||n.focus(),e.stop())}),n.on("gutterdblclick",function(e){var o,t,r;"foldWidgets"==n.renderer.$gutterLayer.getRegion(e)&&(r=e.getDocumentPosition().row,(t=(t=(o=n.session).getParentFoldRangeData(r,!0)).range||t.firstRange)&&(r=t.start.row,(r=o.getFoldAt(r,o.getLine(r).length,1))?o.removeFold(r):(o.addFold("...",t),n.renderer.scrollCursorIntoView({row:t.start.row,column:0}))),e.stop())})}exports.FoldHandler=FoldHandler;