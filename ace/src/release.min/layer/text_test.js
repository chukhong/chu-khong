"undefined"!=typeof process&&(require("amd-loader"),require("../test/mockdom"));var assert=require("../test/assertions"),EditSession=require("../edit_session").EditSession,TextLayer=require("./text").Text,JavaScriptMode=require("../mode/javascript").Mode,dom=require("../lib/dom");module.exports={setUp:function(e){this.session=new EditSession(""),this.session.setMode(new JavaScriptMode),this.textLayer=new TextLayer(document.createElement("div")),this.textLayer.setSession(this.session),this.textLayer.config={characterWidth:10,lineHeight:20},e()},"test: render line with hard tabs should render the same as lines with soft tabs":function(){this.session.setValue("a\ta\ta\t\na   a   a   \n"),this.textLayer.$computeTabString();var e=dom.createElement("div"),s=(this.textLayer.$renderLine(e,0),dom.createElement("div"));this.textLayer.$renderLine(s,1),assert.equal(e.innerHTML,s.innerHTML)},"test rendering width of ideographic space (U+3000)":function(){this.session.setValue("　");var e=dom.createElement("div"),e=(this.textLayer.$renderLine(e,0),assert.domNode(e,["div",{},["span",{class:"ace_cjk",style:"width: 20px;"},"　"]]),this.textLayer.setShowInvisibles(!0),dom.createElement("div"));this.textLayer.$renderLine(e,0),assert.domNode(e,["div",{},["span",{class:"ace_cjk ace_invisible ace_invisible_space",style:"width: 20px;"},this.textLayer.SPACE_CHAR],["span",{class:"ace_invisible ace_invisible_eol"},"¶"]])},"test rendering of indent guides":function(){function e(e){return Array(e+1).join(" ")}function s(e){return Array(e+1).join(a.SPACE_CHAR)}function i(e){return Array(e+1).join(a.TAB_CHAR)}var a=this.textLayer,t='<span class="ace_invisible ace_invisible_eol">'+a.EOL_CHAR+"</span>";function n(e){for(var s=e.length;s--;){var i=dom.createElement("div");a.$renderLine(i,s),assert.equal(i.innerHTML,e[s])}}this.session.setValue("      \n\t\tf\n   "),n(['<span class="ace_indent-guide">'+e(4)+"</span>"+e(2),'<span class="ace_indent-guide">'+e(4)+"</span>"+e(4)+'<span class="ace_identifier">f</span>',e(3)]),this.textLayer.setShowInvisibles(!0),n(['<span class="ace_indent-guide ace_invisible ace_invisible_space">'+s(4)+'</span><span class="ace_invisible ace_invisible_space">'+s(2)+"</span>"+t,'<span class="ace_indent-guide ace_invisible ace_invisible_tab">'+i(4)+'</span><span class="ace_invisible ace_invisible_tab">'+i(4)+'</span><span class="ace_identifier">f</span>'+t]),this.textLayer.setDisplayIndentGuides(!1),n(['<span class="ace_invisible ace_invisible_space">'+s(6)+"</span>"+t,'<span class="ace_invisible ace_invisible_tab">'+i(4)+'</span><span class="ace_invisible ace_invisible_tab">'+i(4)+'</span><span class="ace_identifier">f</span>'+t])}},"undefined"!=typeof module&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();