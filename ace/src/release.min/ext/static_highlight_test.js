"undefined"!=typeof process&&require("amd-loader");var assert=require("assert"),highlighter=require("./static_highlight"),EditSession=require("../edit_session").EditSession,JavaScriptMode=require("../mode/javascript").Mode,TextMode=require("../mode/text").Mode,dom=require("../lib/dom"),config=require("../config");module.exports={timeout:1e4,"test loading in node":function(e){require("../test/mockdom").unload(),"undefined"!=typeof process&&assert.equal(typeof window,"undefined"),require("../ace"),e()},"test simple snippet":function(e){var a=require("../theme/tomorrow"),s=["/** this is a function","*","*/","","function hello (a, b, c) {","    console.log(a * b + c + 'sup$');","           //","\t\t\t//","}"].join("\n"),n=new JavaScriptMode,s=highlighter.render(s,n,a);assert.equal(s.html,"<div class='ace-tomorrow'><div class='ace_static_highlight ace_show_gutter' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_comment ace_doc'>/** this is a function</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_comment ace_doc'>*</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_comment ace_doc'>*/</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_storage ace_type'>function</span> <span class='ace_entity ace_name ace_function'>hello</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_variable ace_parameter'>a</span><span class='ace_punctuation ace_operator'>, </span><span class='ace_variable ace_parameter'>b</span><span class='ace_punctuation ace_operator'>, </span><span class='ace_variable ace_parameter'>c</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_paren ace_lparen'>{</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span>    <span class='ace_storage ace_type'>console</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_support ace_function ace_firebug'>log</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>a</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>b</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>c</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_string'>&#39;sup$&#39;</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>   <span class='ace_comment'>//</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>    <span class='ace_comment'>//</span>\n</div><div class='ace_line'><span class='ace_gutter ace_gutter-cell'></span><span class='ace_paren ace_rparen'>}</span>\n</div></div></div>"),assert.ok(!!s.css),e()},"test css from theme is used":function(e){var a=require("../theme/tomorrow"),s=["/** this is a function","*","*/","function hello (a, b, c) {","    console.log(a * b + c + 'sup?');","}"].join("\n"),n=new JavaScriptMode,s=highlighter.render(s,n,a);assert.ok(-1!==s.css.indexOf(a.cssText)),e()},"test theme classname should be in output html":function(e){var a=require("../theme/tomorrow"),s=["/** this is a function","*","*/","function hello (a, b, c) {","    console.log(a * b + c + 'sup?');","}"].join("\n"),n=new JavaScriptMode,s=highlighter.render(s,n,a);assert.equal(!!s.html.match(/<div class='ace-tomorrow'>/),!0),e()},"test js string replace specials":function(e){var a=require("../theme/tomorrow"),s=new TextMode,s=highlighter.render("$'$1$2$$$&",s,a);assert.ok(-1!=s.html.indexOf("</span>$&#39;$1$2$$$&#38;\n</div>")),e()},"test html special chars":function(e){var a=require("../theme/tomorrow"),s="&<>'\"",n=new TextMode,c=highlighter.render(s,n,a),n=(assert.ok(-1!=c.html.indexOf("</span>&#38;&#60;>&#39;&#34;\n</div>")),new JavaScriptMode),c=highlighter.render("/*"+s,n,a);assert.ok(-1!=c.html.indexOf("<span class='ace_comment'>/*&#38;&#60;>&#39;&#34;</span>")),e()},"test async highlight":function(e){require("../test/mockdom"),EditSession.prototype.$modes["./mode/javascript"]=new JavaScriptMode;var a=dom.buildDom(["div",{},"var a = 1"]);highlighter.highlight(a,{theme:"./theme/tomorrow",mode:"./mode/javascript"},function(){assert.ok(/class="ace_storage ace_type">var/.test(a.innerHTML)),e()})}},"undefined"!=typeof module&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();