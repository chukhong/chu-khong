"undefined"!=typeof process&&(require("amd-loader"),require("./test/mockdom"));var dom=require("./lib/dom"),ace=require("./ace"),assert=require("./test/assertions");function click(e){e.dispatchEvent(new CustomEvent("mousedown"))}function sendText(e,t){e.value=e.value.slice(0,e.selectionStart)+t+e.value.slice(e.selectionEnd),e.dispatchEvent(new CustomEvent("input"))}module.exports={"test: ace edit":function(){var e=ace.edit(null,{value:"Helo world"}),t=(assert.equal(e.getValue(),"Helo world"),ace.createEditSession("Juhu kinners!"));e.setSession(t),assert.equal(e.getValue(),"Juhu kinners!"),assert.equal(e,ace.edit(e.container)),e.destroy()},"test: edit textarea":function(){var e=document.createElement("textarea"),t=(document.body.appendChild(e),ace.edit(e));assert.notEqual(t.container,e),t.container.id="editor1",assert.equal(t,ace.edit("editor1")),t.destroy(),document.body.removeChild(t.container)},"test: edit element by id":function(){var e=document.createElement("div"),t=(document.body.appendChild(e),null);try{t=ace.edit("x")}catch(e){}assert.equal(t,null),e.id="editor2",e.textContent="h",t=ace.edit("editor2"),assert.equal(e,t.container),assert.equal("h",t.getValue()),document.body.removeChild(e)},"test: destroy":function(e){var t=ace.edit(),s=t.renderer.getMouseEventTarget(),n=t.textInput.getElement(),r=(sendText(n,"x"),assert.ok(!t.curOp),assert.equal(t.getValue(),"x"),t.insert("1"),assert.ok(t.curOp),0);t.focus=function(){r++},click(s),assert.equal(r,1),t.destroy(),click(s),assert.equal(r,1),setTimeout(function(){assert.notOk(!!t.curOp),t.setSession(null),sendText(n,"2"),e()})},"test: useStrictCSP":function(){function e(){return document.getElementById("test.css")}ace.config.set("useStrictCSP",void 0),assert.ok(!e()),dom.importCssString("test{}","test.css",!1),assert.ok(!e()),ace.config.set("useStrictCSP",!0),assert.ok(!e()),ace.config.set("useStrictCSP",!1),assert.ok(e())}},"undefined"!=typeof module&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();