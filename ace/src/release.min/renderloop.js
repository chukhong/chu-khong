"use strict";var event=require("./lib/event"),RenderLoop=function(e,n){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=n||window;var i=this;this._flush=function(e){i.pending=!1;var n=i.changes;n&&(event.blockIdle(100),i.changes=0,i.onRender(n)),i.changes?i.$recursionLimit--<0||i.schedule():i.$recursionLimit=2}};!function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(event.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var n=this.changes;return this.changes=0,n}}.call(RenderLoop.prototype),exports.RenderLoop=RenderLoop;