"undefined"!=typeof process&&(require("amd-loader"),require("./test/mockdom"));var EditSession=require("./edit_session").EditSession,Editor=require("./editor").Editor,MockRenderer=require("./test/mockrenderer").MockRenderer,assert=require("./test/assertions"),JavaScriptMode=require("./mode/javascript").Mode,PlaceHolder=require("./placeholder").PlaceHolder,UndoManager=require("./undomanager").UndoManager;require("./multi_select"),module.exports={"test: simple at the end appending of text":function(){var e=new EditSession("var a = 10;\nconsole.log(a, a);",new JavaScriptMode),o=new Editor(new MockRenderer,e);new PlaceHolder(e,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]),o.moveCursorTo(0,5),o.insert("b"),assert.equal(e.doc.getValue(),"var ab = 10;\nconsole.log(ab, ab);"),o.insert("cd"),assert.equal(e.doc.getValue(),"var abcd = 10;\nconsole.log(abcd, abcd);"),o.remove("left"),o.remove("left"),o.remove("left"),assert.equal(e.doc.getValue(),"var a = 10;\nconsole.log(a, a);")},"test: inserting text outside placeholder":function(){var e=new EditSession("var a = 10;\nconsole.log(a, a);\n",new JavaScriptMode),o=new Editor(new MockRenderer,e);new PlaceHolder(e,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]),o.moveCursorTo(2,0),o.insert("b"),assert.equal(e.doc.getValue(),"var a = 10;\nconsole.log(a, a);\nb")},"test: insertion at the beginning":function(e){var o=new EditSession("var a = 10;\nconsole.log(a, a);",new JavaScriptMode),r=new Editor(new MockRenderer,o);new PlaceHolder(o,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);r.moveCursorTo(0,4),r.insert("$"),assert.equal(o.doc.getValue(),"var $a = 10;\nconsole.log($a, $a);"),r.moveCursorTo(0,4),setTimeout(function(){r.insert("v"),assert.equal(o.doc.getValue(),"var v$a = 10;\nconsole.log(v$a, v$a);"),e()},20)},"test: detaching placeholder":function(){var e=new EditSession("var a = 10;\nconsole.log(a, a);",new JavaScriptMode),o=new Editor(new MockRenderer,e),r=new PlaceHolder(e,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);o.moveCursorTo(0,5),o.insert("b"),assert.equal(e.doc.getValue(),"var ab = 10;\nconsole.log(ab, ab);"),r.detach(),o.insert("cd"),assert.equal(e.doc.getValue(),"var abcd = 10;\nconsole.log(ab, ab);")},"test: events":function(){var e=new EditSession("var a = 10;\nconsole.log(a, a);",new JavaScriptMode),o=new Editor(new MockRenderer,e),e=new PlaceHolder(e,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]),r=!1,n=!1;e.on("cursorEnter",function(){r=!0}),e.on("cursorLeave",function(){n=!0}),o.moveCursorTo(0,0),o.moveCursorTo(0,4),e.onCursorChange(),assert.ok(r),o.moveCursorTo(1,0),e.onCursorChange(),assert.ok(n)},"test: cancel":function(e){var o=new EditSession("var a = 10;\nconsole.log(a, a);",new JavaScriptMode),r=(o.setUndoManager(new UndoManager),new Editor(new MockRenderer,o)),n=new PlaceHolder(o,1,{row:0,column:4},[{row:1,column:12},{row:1,column:15}]);r.moveCursorTo(0,5),r.insert("b"),r.insert("cd"),r.remove("left"),assert.equal(o.doc.getValue(),"var abc = 10;\nconsole.log(abc, abc);"),setTimeout(function(){n.cancel(),assert.equal(o.doc.getValue(),"var a = 10;\nconsole.log(a, a);"),e()},80)}},"undefined"!=typeof module&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();