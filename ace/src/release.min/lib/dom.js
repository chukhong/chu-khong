"use strict";var strictCSP,div,useragent=require("./useragent"),XHTML_NS="http://www.w3.org/1999/xhtml",cssCache=(exports.buildDom=function e(t,s,r){if("string"==typeof t&&t)return l=document.createTextNode(t),s&&s.appendChild(l),l;if(!Array.isArray(t))return t&&t.appendChild&&s&&s.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var n=[],o=0;o<t.length;o++){var i=e(t[o],s,r);i&&n.push(i)}return n}for(var a=document.createElement(t[0]),c=t[1],l=1,o=l=c&&"object"==typeof c&&!Array.isArray(c)?2:l;o<t.length;o++)e(t[o],a,r);return 2==l&&Object.keys(c).forEach(function(e){var t=c[e];"class"===e?a.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?a[e]=t:"ref"===e?r&&(r[t]=a):"style"===e?"string"==typeof t&&(a.style.cssText=t):null!=t&&a.setAttribute(e,t)}),s&&s.appendChild(a),a},exports.getDocumentHead=function(e){return(e=e||document).head||e.getElementsByTagName("head")[0]||e.documentElement},exports.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||XHTML_NS,e):document.createElement(e)},exports.removeChildren=function(e){e.innerHTML=""},exports.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},exports.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},exports.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},exports.addCssClass=function(e,t){exports.hasCssClass(e,t)||(e.className+=" "+t)},exports.removeCssClass=function(e,t){for(var s=e.className.split(/\s+/g);;){var r=s.indexOf(t);if(-1==r)break;s.splice(r,1)}e.className=s.join(" ")},exports.toggleCssClass=function(e,t){for(var s=e.className.split(/\s+/g),r=!0;;){var n=s.indexOf(t);if(-1==n)break;r=!1,s.splice(n,1)}return r&&s.push(t),e.className=s.join(" "),r},exports.setCssClass=function(e,t,s){s?exports.addCssClass(e,t):exports.removeCssClass(e,t)},exports.hasCssString=function(e,t){var s,r=0;if(s=(t=t||document).querySelectorAll("style"))for(;r<s.length;)if(s[r++].id===e)return!0},exports.removeElementById=function(e,t){(t=t||document).getElementById(e)&&t.getElementById(e).remove()},[]);function insertPendingStyles(){var e=cssCache;cssCache=null,e&&e.forEach(function(e){importCssString(e[0],e[1])})}function importCssString(e,t,s){if("undefined"!=typeof document){if(cssCache)if(s)insertPendingStyles();else if(!1===s)return cssCache.push([e,t]);if(!strictCSP){var r=s,s=(r=s&&s.getRootNode&&(r=s.getRootNode())&&r!=s?r:document).ownerDocument||r;if(t&&exports.hasCssString(t,r))return null;t&&(e+="\n/*# sourceURL=ace/css/"+t+" */");var n=exports.createElement("style");n.appendChild(s.createTextNode(e)),t&&(n.id=t),(r=r==s?exports.getDocumentHead(s):r).insertBefore(n,r.firstChild)}}}exports.useStrictCSP=function(e){0==(strictCSP=e)?insertPendingStyles():cssCache=cssCache||[]},exports.importCssString=importCssString,exports.importCssStylsheet=function(e,t){exports.buildDom(["link",{rel:"stylesheet",href:e}],exports.getDocumentHead(t))},exports.scrollbarWidth=function(e){var t=exports.createElement("ace_inner"),s=(t.style.width="100%",t.style.minWidth="0px",t.style.height="200px",t.style.display="block",exports.createElement("ace_outer")),r=s.style,e=(r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",s.appendChild(t),e.documentElement),n=(e.appendChild(s),t.offsetWidth),r=(r.overflow="scroll",t.offsetWidth);return n==r&&(r=s.clientWidth),e.removeChild(s),n-r},exports.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},exports.setStyle=function(e,t,s){e[t]!==s&&(e[t]=s)},exports.HAS_CSS_ANIMATION=!1,exports.HAS_CSS_TRANSFORMS=!1,exports.HI_DPI=!useragent.isWin||"undefined"!=typeof window&&1.5<=window.devicePixelRatio,useragent.isChromeOS&&(exports.HI_DPI=!1),"undefined"!=typeof document&&(div=document.createElement("div"),exports.HI_DPI&&void 0!==div.style.transform&&(exports.HAS_CSS_TRANSFORMS=!0),useragent.isEdge||void 0===div.style.animationName||(exports.HAS_CSS_ANIMATION=!0),div=null),exports.HAS_CSS_TRANSFORMS?exports.translate=function(e,t,s){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(s)+"px)"}:exports.translate=function(e,t,s){e.style.top=Math.round(s)+"px",e.style.left=Math.round(t)+"px"};