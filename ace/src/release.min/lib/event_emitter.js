"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[t]||[],n=this._defaultHandlers[t];if(i.length||n){(e="object"==typeof e&&e?e:{}).type||(e.type=t),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault);for(var i=i.slice(),s=0;s<i.length&&(i[s](e,this),!e.propagationStopped);s++);return n&&!e.defaultPrevented?n(e,this):void 0}},EventEmitter._signal=function(t,e){if(i=(this._eventRegistry||{})[t])for(var i=i.slice(),n=0;n<i.length;n++)i[n](e,this)},EventEmitter.once=function(e,i){var n=this;if(this.on(e,function t(){n.off(e,t),i.apply(null,arguments)}),!i)return new Promise(function(t){i=t})},EventEmitter.setDefaultHandler=function(t,e){var i,n,s=this._defaultHandlers;(s=s||(this._defaultHandlers={_disabled_:{}}))[t]&&(n=s[t],(i=s._disabled_[t])||(s._disabled_[t]=i=[]),i.push(n),-1!=(n=i.indexOf(e)))&&i.splice(n,1),s[t]=e},EventEmitter.removeDefaultHandler=function(t,e){var i,n=this._defaultHandlers;n&&(i=n._disabled_[t],n[t]==e?i&&this.setDefaultHandler(t,i.pop()):i&&-1!=(n=i.indexOf(e))&&i.splice(n,1))},EventEmitter.on=EventEmitter.addEventListener=function(t,e,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];return-1==(n=n||(this._eventRegistry[t]=[])).indexOf(e)&&n[i?"unshift":"push"](e),e},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};t=this._eventRegistry[t];t&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},EventEmitter.removeAllListeners=function(t){t||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[t]=void 0),this._defaultHandlers&&(this._defaultHandlers[t]=void 0)},exports.EventEmitter=EventEmitter;