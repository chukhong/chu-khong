"use strict";var ArabicAlefBetIntervalsBegine=["ء","ف"],ArabicAlefBetIntervalsEnd=["غ","ي"],dir=0,hiLevel=0,lastArabic=!1,hasUBAT_AL=!1,hasUBAT_B=!1,hasUBAT_S=!1,hasBlockSep=!1,hasSegSep=!1,impTab_LTR=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],impTab_RTL=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],LTR=0,RTL=1,L=0,R=1,EN=2,AN=3,ON=4,B=5,S=6,AL=7,WS=8,CS=9,ES=10,ET=11,NSM=12,LRE=13,RLE=14,PDF=15,LRO=16,RLO=17,BN=18,UnicodeTBL00=[BN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,WS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,EN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,ON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,ON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,BN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,CS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,ET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON],UnicodeTBL20=[WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,ET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS];function _computeLevels(N,e,r,O){var L,t,a,s=dir?impTab_RTL:impTab_LTR,i=0,n=-1,c=null,l=null,o=[];if(!O)for(c=0,O=[];c<r;c++)O[c]=_getCharacterType(N[c]);for(hiLevel=dir,hasUBAT_S=hasUBAT_B=hasUBAT_AL=lastArabic=!1,l=0;l<r;l++){if(a=i,o[l]=L=_getCharClass(N,O,o,l),a=240&(i=s[a][L]),i&=15,e[l]=t=s[i][5],0<a){if(16==a)for(c=n;c<l;c++)e[c]=1;n=-1}if(s[i][6])-1==n&&(n=l);else if(-1<n){for(c=n;c<l;c++)e[c]=t;n=-1}O[l]==B&&(e[l]=0),hiLevel|=t}if(hasUBAT_S)for(c=0;c<r;c++)if(O[c]==S){e[c]=dir;for(var E=c-1;0<=E&&O[E]==WS;E--)e[E]=dir}}function _invertLevel(N,e,r){if(!(hiLevel<N))if(1!=N||dir!=RTL||hasUBAT_B)for(var O,L,t,B,a=r.length,s=0;s<a;){if(e[s]>=N){for(O=s+1;O<a&&e[O]>=N;)O++;for(L=s,t=O-1;L<t;L++,t--)B=r[L],r[L]=r[t],r[t]=B;s=O}s++}else r.reverse()}function _getCharClass(N,e,r,O){var t,a,s=e[O];switch(s){case L:case R:lastArabic=!1;case ON:case AN:return s;case EN:return lastArabic?AN:EN;case AL:return hasUBAT_AL=lastArabic=!0,R;case WS:return ON;case CS:return O<1||O+1>=e.length||(n=r[O-1])!=EN&&n!=AN||(i=e[O+1])!=EN&&i!=AN?ON:(i=lastArabic?AN:i)==n?i:ON;case ES:return(n=0<O?r[O-1]:B)==EN&&O+1<e.length&&e[O+1]==EN?EN:ON;case ET:if(0<O&&r[O-1]==EN)return EN;if(lastArabic)return ON;for(a=O+1,t=e.length;a<t&&e[a]==ET;)a++;return a<t&&e[a]==EN?EN:ON;case NSM:for(t=e.length,a=O+1;a<t&&e[a]==NSM;)a++;if(a<t){var i=N[O],n=e[a];if((1425<=i&&i<=2303||64286==i)&&(n==R||n==AL))return R}return O<1||(n=e[O-1])==B?ON:r[O-1];case B:return hasUBAT_B=!(lastArabic=!1),dir;case S:return hasUBAT_S=!0,ON;case LRE:case RLE:case LRO:case RLO:case PDF:lastArabic=!1;case BN:return ON}}function _getCharacterType(N){var e=N.charCodeAt(0),r=e>>8;return 0==r?191<e?L:UnicodeTBL00[e]:5==r?/[\u0591-\u05f4]/.test(N)?R:L:6==r?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(N)?NSM:/[\u0660-\u0669\u066b-\u066c]/.test(N)?AN:1642==e?ET:/[\u06f0-\u06f9]/.test(N)?EN:AL:32==r&&e<=8287?UnicodeTBL20[255&e]:254==r&&65136<=e?AL:ON}function _isArabicDiacritics(N){return"ً"<=N&&N<="ٕ"}exports.L=L,exports.R=R,exports.EN=EN,exports.ON_R=3,exports.AN=4,exports.R_H=5,exports.B=6,exports.RLE=7,exports.DOT="·",exports.doBidiReorder=function(N,e,r){if(N.length<2)return{};var O=N.split(""),L=new Array(O.length),t=new Array(O.length),B=[];dir=r?RTL:LTR,_computeLevels(O,B,O.length,e);for(var a=0;a<L.length;L[a]=a,a++);_invertLevel(2,B,L),_invertLevel(1,B,L);for(a=0;a<L.length-1;a++)e[a]===AN?B[a]=exports.AN:B[a]===R&&(e[a]>AL&&e[a]<LRE||e[a]===ON||e[a]===BN)?B[a]=exports.ON_R:0<a&&"ل"===O[a-1]&&/\u0622|\u0623|\u0625|\u0627/.test(O[a])&&(B[a-1]=B[a]=exports.R_H,a++);O[O.length-1]===exports.DOT&&(B[O.length-1]=exports.B),"‫"===O[0]&&(B[0]=exports.RLE);for(a=0;a<L.length;a++)t[a]=B[L[a]];return{logicalFromVisual:L,bidiLevels:t}},exports.hasBidiCharacters=function(N,e){for(var r=!1,O=0;O<N.length;O++)e[O]=_getCharacterType(N.charAt(O)),r||e[O]!=R&&e[O]!=AL&&e[O]!=AN||(r=!0);return r},exports.getVisualFromLogicalIdx=function(N,e){for(var r=0;r<e.logicalFromVisual.length;r++)if(e.logicalFromVisual[r]==N)return r;return 0};