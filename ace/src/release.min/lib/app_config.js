var oop=require("./oop"),EventEmitter=require("./event_emitter").EventEmitter,optionsProvider={setOptions:function(o){Object.keys(o).forEach(function(t){this.setOption(t,o[t])},this)},getOptions:function(t){var o,i={};return t?Array.isArray(t)||(i=t,t=Object.keys(i)):(o=this.$options,t=Object.keys(o).filter(function(t){return!o[t].hidden})),t.forEach(function(t){i[t]=this.getOption(t)},this),i},setOption:function(t,o){var i;if(this["$"+t]!==o)return(i=this.$options[t])?i.forwardTo?this[i.forwardTo]&&this[i.forwardTo].setOption(t,o):(i.handlesSet||(this["$"+t]=o),void(i&&i.set&&i.set.call(this,o))):warn('misspelled option "'+t+'"')},getOption:function(t){var o=this.$options[t];return o?o.forwardTo?this[o.forwardTo]&&this[o.forwardTo].getOption(t):o&&o.get?o.get.call(this):this["$"+t]:warn('misspelled option "'+t+'"')}};function warn(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function reportError(t,o){var i=new Error(t);i.data=o,"object"==typeof console&&console.error&&console.error(i),setTimeout(function(){throw i})}var AppConfig=function(){this.$defaultOptions={}};!function(){oop.implement(this,EventEmitter),this.defineOptions=function(i,t,e){return i.$options||(this.$defaultOptions[t]=i.$options={}),Object.keys(e).forEach(function(t){var o=e[t];(o="string"==typeof o?{forwardTo:o}:o).name||(o.name=t),"initialValue"in(i.$options[o.name]=o)&&(i["$"+o.name]=o.initialValue)}),oop.implement(i,optionsProvider),this},this.resetOptions=function(i){Object.keys(i.$options).forEach(function(t){var o=i.$options[t];"value"in o&&i.setOption(t,o.value)})},this.setDefaultValue=function(t,o,i){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][o])break;if(!this.$defaultOptions[t][o])return!1}var e=this.$defaultOptions[t]||(this.$defaultOptions[t]={});e[o]&&(e.forwardTo?this.setDefaultValue(e.forwardTo,o,i):e[o].value=i)},this.setDefaultValues=function(o,i){Object.keys(i).forEach(function(t){this.setDefaultValue(o,t,i[t])},this)},this.warn=warn,this.reportError=reportError}.call(AppConfig.prototype),exports.AppConfig=AppConfig;