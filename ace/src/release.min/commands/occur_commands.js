var config=require("../config"),Occur=require("../occur").Occur,occurStartCommand={name:"occur",exec:function(r,n){var e=!!r.session.$occur;(new Occur).enter(r,n)&&!e&&OccurKeyboardHandler.installIn(r)},readOnly:!0},occurCommands=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(r){var n=r.session.$occur;n&&(n.exit(r,{}),r.session.$occur||OccurKeyboardHandler.uninstallFrom(r))},readOnly:!0},{name:"occuraccept",bindKey:"enter",exec:function(r){var n=r.session.$occur;n&&(n.exit(r,{translatePosition:!0}),r.session.$occur||OccurKeyboardHandler.uninstallFrom(r))},readOnly:!0}],HashHandler=require("../keyboard/hash_handler").HashHandler,oop=require("../lib/oop");function OccurKeyboardHandler(){}oop.inherits(OccurKeyboardHandler,HashHandler),function(){this.isOccurHandler=!0,this.attach=function(r){HashHandler.call(this,occurCommands,r.commands.platform),this.$editor=r};var c=this.handleKeyboard;this.handleKeyboard=function(r,n,e,a){r=c.call(this,r,n,e,a);return r&&r.command?r:void 0}}.call(OccurKeyboardHandler.prototype),OccurKeyboardHandler.installIn=function(r){var n=new this;r.keyBinding.addKeyboardHandler(n),r.commands.addCommands(occurCommands)},OccurKeyboardHandler.uninstallFrom=function(r){r.commands.removeCommands(occurCommands);var n=r.getKeyboardHandler();n.isOccurHandler&&r.keyBinding.removeKeyboardHandler(n)},exports.occurStartCommand=occurStartCommand;