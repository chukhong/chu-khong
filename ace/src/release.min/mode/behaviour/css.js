"use strict";var oop=require("../../lib/oop"),Behaviour=require("../behaviour").Behaviour,CstyleBehaviour=require("./cstyle").CstyleBehaviour,TokenIterator=require("../../token_iterator").TokenIterator,CssBehaviour=function(){this.inherit(CstyleBehaviour),this.add("colon","insertion",function(e,t,o,i,r){if(":"===r&&o.selection.isEmpty()){var r=o.getCursorPosition(),o=new TokenIterator(i,r.row,r.column),n=o.getCurrentToken();if((n=n&&n.value.match(/\s+/)?o.stepBackward():n)&&"support.type"===n.type)return":"===(o=i.doc.getLine(r.row)).substring(r.column,r.column+1)?{text:"",selection:[1,1]}:/^(\s+[^;]|\s*$)/.test(o.substring(r.column))?{text:":;",selection:[1,1]}:void 0}}),this.add("colon","deletion",function(e,t,o,i,r){var n=i.doc.getTextRange(r);if(!r.isMultiLine()&&":"===n){n=o.getCursorPosition(),o=new TokenIterator(i,n.row,n.column),n=o.getCurrentToken();if((n=n&&n.value.match(/\s+/)?o.stepBackward():n)&&"support.type"===n.type)if(";"===i.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r}}),this.add("semicolon","insertion",function(e,t,o,i,r){if(";"===r&&o.selection.isEmpty()){r=o.getCursorPosition();if(";"===i.doc.getLine(r.row).substring(r.column,r.column+1))return{text:"",selection:[1,1]}}}),this.add("!important","insertion",function(e,t,o,i,r){if("!"===r&&o.selection.isEmpty()){r=o.getCursorPosition(),o=i.doc.getLine(r.row);if(/^\s*(;|}|$)/.test(o.substring(r.column)))return{text:"!important",selection:[10,10]}}})};oop.inherits(CssBehaviour,CstyleBehaviour),exports.CssBehaviour=CssBehaviour;