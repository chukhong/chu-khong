"use strict";var oop=require("../lib/oop"),TextMode=require("./text").Mode,FortranHighlightRules=require("./fortran_highlight_rules").FortranHighlightRules,CStyleFoldMode=require("./folding/cstyle").FoldMode,Range=require("../range").Range,Mode=function(){this.HighlightRules=FortranHighlightRules,this.foldingRules=new CStyleFoldMode,this.$behaviour=this.$defaultBehaviour};oop.inherits(Mode,TextMode),function(){this.lineCommentStart="!",this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),r=this.getTokenizer().getLineTokens(t,e).tokens;return r.length&&"comment"==r[r.length-1].type||"start"==e&&t.match(/^.*[\{\(\[:]\s*$/)&&(i+=n),i};var o={return:1,break:1,continue:1,RETURN:1,BREAK:1,CONTINUE:1};this.checkOutdent=function(e,t,n){if("\r\n"!==n&&"\r"!==n&&"\n"!==n)return!1;var i=this.getTokenizer().getLineTokens(t.trim(),e).tokens;if(!i)return!1;do{var r=i.pop()}while(r&&("comment"==r.type||"text"==r.type&&r.value.match(/^\s+$/)));return!!r&&"keyword"==r.type&&o[r.value]},this.autoOutdent=function(e,t,n){var i=this.$getIndent(t.getLine(n+=1)),r=t.getTabString();i.slice(-r.length)==r&&t.remove(new Range(n,i.length-r.length,n,i.length))},this.$id="ace/mode/fortran"}.call(Mode.prototype),exports.Mode=Mode;