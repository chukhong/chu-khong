"use strict";var oop=require("../lib/oop"),HtmlHighlightRules=require("./html_highlight_rules").HtmlHighlightRules,RubyHighlightRules=require("./ruby_highlight_rules").RubyHighlightRules,HtmlRubyHighlightRules=function(){HtmlHighlightRules.call(this);var e,t=[{regex:"<%%|%%>",token:"constant.language.escape"},{token:"comment.start.erb",regex:"<%#",push:[{token:"comment.end.erb",regex:"%>",next:"pop",defaultToken:"comment"}]},{token:"support.ruby_tag",regex:"<%+(?!>)[-=]?",push:"ruby-start"}];for(e in this.$rules)this.$rules[e].unshift.apply(this.$rules[e],t);this.embedRules(RubyHighlightRules,"ruby-",[{token:"support.ruby_tag",regex:"%>",next:"pop"},{token:"comment",regex:"#(?:[^%]|%[^>])*"}],["start"]),this.normalizeRules()};oop.inherits(HtmlRubyHighlightRules,HtmlHighlightRules),exports.HtmlRubyHighlightRules=HtmlRubyHighlightRules;