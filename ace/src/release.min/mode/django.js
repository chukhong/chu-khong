var oop=require("../lib/oop"),HtmlMode=require("./html").Mode,HtmlHighlightRules=require("./html_highlight_rules").HtmlHighlightRules,TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,DjangoHighlightRules=function(){this.$rules={start:[{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"},{token:"constant",regex:"[0-9]+"},{token:"variable",regex:"[-_a-zA-Z0-9:]+"}],tag:[{token:"entity.name.function",regex:"[a-zA-Z][_a-zA-Z0-9]*",next:"start"}]}},DjangoHtmlHighlightRules=(oop.inherits(DjangoHighlightRules,TextHighlightRules),function(){for(var e in this.$rules=(new HtmlHighlightRules).getRules(),this.$rules)this.$rules[e].unshift({token:"comment.line",regex:"\\{#.*?#\\}"},{token:"comment.block",regex:"\\{\\%\\s*comment\\s*\\%\\}",merge:!0,next:"django-comment"},{token:"constant.language",regex:"\\{\\{",next:"django-start"},{token:"constant.language",regex:"\\{\\%",next:"django-tag"}),this.embedRules(DjangoHighlightRules,"django-",[{token:"comment.block",regex:"\\{\\%\\s*endcomment\\s*\\%\\}",merge:!0,next:"start"},{token:"constant.language",regex:"\\%\\}",next:"start"},{token:"constant.language",regex:"\\}\\}",next:"start"}])}),Mode=(oop.inherits(DjangoHtmlHighlightRules,HtmlHighlightRules),function(){HtmlMode.call(this),this.HighlightRules=DjangoHtmlHighlightRules});oop.inherits(Mode,HtmlMode),function(){this.$id="ace/mode/django",this.snippetFileId="ace/snippets/django"}.call(Mode.prototype),exports.Mode=Mode;