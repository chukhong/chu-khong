"use strict";var oop=require("../lib/oop"),TextMode=require("./text").Mode,ClojureHighlightRules=require("./clojure_highlight_rules").ClojureHighlightRules,MatchingParensOutdent=require("./matching_parens_outdent").MatchingParensOutdent,Mode=function(){this.HighlightRules=ClojureHighlightRules,this.$outdent=new MatchingParensOutdent,this.$behaviour=this.$defaultBehaviour};oop.inherits(Mode,TextMode),function(){this.lineCommentStart=";",this.minorIndentFunctions=["defn","defn-","defmacro","def","deftest","testing"],this.$toIndent=function(t){return t.split("").map(function(t){return/\s/.exec(t)?t:" "}).join("")},this.$calculateIndent=function(t,e){for(var n,i,u=this.$getIndent(t),o=0,s=t.length-1;0<=s&&("("===(i=t[s])?(o--,n=!0):"["===i||"{"===i?(o--,n=!1):")"!==i&&"]"!==i&&"}"!==i||o++,!(o<0));s--);if(!(o<0&&n))return o<0&&!n?this.$toIndent(t.substring(0,s+1)):0<o?u.substring(0,u.length-e.length):u;for(var r=s+=1,h="";;){if(" "===(i=t[s])||"\t"===i)return-1!==this.minorIndentFunctions.indexOf(h)?this.$toIndent(t.substring(0,r-1)+e):this.$toIndent(t.substring(0,s+1));if(void 0===i)return this.$toIndent(t.substring(0,r-1)+e);h+=t[s],s++}},this.getNextLineIndent=function(t,e,n){return this.$calculateIndent(e,n)},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.$id="ace/mode/clojure",this.snippetFileId="ace/snippets/clojure"}.call(Mode.prototype),exports.Mode=Mode;