"use strict";var oop=require("../lib/oop"),HtmlHighlightRules=require("./html_highlight_rules").HtmlHighlightRules,TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,LatteHighlightRules=function(){for(var e in HtmlHighlightRules.call(this),this.$rules)this.$rules[e].unshift({token:"comment.start.latte",regex:"\\{\\*",push:[{token:"comment.end.latte",regex:".*\\*\\}",next:"pop"},{defaultToken:"comment"}]},{token:"meta.tag.punctuation.tag-open.latte",regex:"\\{(?![\\s'\"{}]|$)/?",push:[{token:"meta.tag.latte",regex:"(?:_|=|[a-z]\\w*(?:[.:-]\\w+)*)?",next:[{token:"meta.tag.punctuation.tag-close.latte",regex:"\\}",next:"pop"},{include:"latte-content"}]}]});this.$rules.tag_stuff.unshift({token:"meta.attribute.latte",regex:"n:[\\w-]+",next:[{include:"tag_whitespace"},{token:"keyword.operator.attribute-equals.xml",regex:"=",next:[{token:"string.attribute-value.xml",regex:"'",next:[{token:"string.attribute-value.xml",regex:"'",next:"tag_stuff"},{include:"latte-content"}]},{token:"string.attribute-value.xml",regex:'"',next:[{token:"string.attribute-value.xml",regex:'"',next:"tag_stuff"},{include:"latte-content"}]},{token:"text.tag-whitespace.xml",regex:"\\s",next:"tag_stuff"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"tag_stuff"},{include:"latte-content"}]},{token:"empty",regex:"",next:"tag_stuff"}]}),this.$rules["latte-content"]=[{token:"comment.start.latte",regex:"\\/\\*",push:[{token:"comment.end.latte",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}]},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:'\\\\(?:[nrtvef\\\\"$]|[0-7]{1,3}|x[0-9A-Fa-f]{1,2})'},{token:"variable",regex:/\$[\w]+(?:\[[\w\]+]|[=\-]>\w+)?/},{token:"variable",regex:/\$\{[^"\}]+\}?/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string.start",regex:"'",push:[{token:"constant.language.escape",regex:/\\['\\]/},{token:"string.end",regex:"'",next:"pop"},{defaultToken:"string"}]},{token:"keyword.control",regex:"\\b(?:INF|NAN|and|or|xor|AND|OR|XOR|clone|new|instanceof|return|continue|break|as)\\b"},{token:"constant.language",regex:"\\b(?:true|false|null|TRUE|FALSE|NULL)\\b"},{token:"variable",regex:/\$\w+/},{token:"constant.numeric",regex:"[+-]?[0-9]+(?:\\.[0-9]+)?(?:e[0-9]+)?"},{token:["support.class","keyword.operator"],regex:"\\b(\\w+)(::)"},{token:"constant.language",regex:"\\b(?:[A-Z0-9_]+)\\b"},{token:"string.unquoted",regex:"\\w+(?:-+\\w+)*"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"::|=>|->|\\?->|\\?\\?->|\\+\\+|--|<<|>>|<=>|<=|>=|===|!==|==|!=|<>|&&|\\|\\||\\?\\?|\\?>|\\*\\*|\\.\\.\\.|[^'\"]"}],this.normalizeRules()};oop.inherits(LatteHighlightRules,TextHighlightRules),exports.LatteHighlightRules=LatteHighlightRules;