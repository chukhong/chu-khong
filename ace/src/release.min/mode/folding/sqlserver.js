"use strict";var oop=require("../../lib/oop"),Range=require("../../range").Range,BaseFoldMode=require("./cstyle").FoldMode,FoldMode=exports.FoldMode=function(){};oop.inherits(FoldMode,BaseFoldMode),function(){this.foldingStartMarker=/(\bCASE\b|\bBEGIN\b)|^\s*(\/\*)/i,this.startRegionRe=/^\s*(\/\*|--)#?region\b/,this.getFoldWidgetRange=function(e,t,o,n){var i,r=e.getLine(o);return this.startRegionRe.test(r)?this.getCommentRegionBlock(e,r,o):(r=r.match(this.foldingStartMarker))?(i=r.index,r[1]?this.getBeginEndBlock(e,o,i,r[1]):((i=e.getCommentFoldRange(o,i+r[0].length,1))&&!i.isMultiLine()&&(n?i=this.getSectionRange(e,o):"all"!=t&&(i=null)),i)):void 0},this.getBeginEndBlock=function(e,t,o,n){for(var o={row:t,column:o+n.length},i=e.getLength(),r=1,g=/(\bCASE\b|\bBEGIN\b)|(\bEND\b)/i;++t<i;){var l=e.getLine(t),a=g.exec(l);if(a&&(a[1]?r++:r--,!r))break}n=t;if(o.row<n)return new Range(o.row,o.column,n,l.length)}}.call(FoldMode.prototype);