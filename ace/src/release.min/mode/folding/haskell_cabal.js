"use strict";var oop=require("../../lib/oop"),BaseFoldMode=require("./fold_mode").FoldMode,Range=require("../../range").Range,FoldMode=exports.FoldMode=function(){};oop.inherits(FoldMode,BaseFoldMode),function(){this.isHeading=function(e,t){e=e.getTokens(t)[0];return 0==t||e&&0===e.type.lastIndexOf("markup.heading",0)},this.getFoldWidget=function(e,t,i){if(this.isHeading(e,i))return"start";if("markbeginend"===t&&!/^\s*$/.test(e.getLine(i))){for(var n=e.getLength();++i<n&&/^\s*$/.test(e.getLine(i)););if(i==n||this.isHeading(e,i))return"end"}return""},this.getFoldWidgetRange=function(e,t,i){var n=e.getLine(i).length,o=e.getLength(),g=i,r=i;if(this.isHeading(e,i)){for(;++i<o;)if(this.isHeading(e,i)){i--;break}if(g<(r=i))for(;g<r&&/^\s*$/.test(e.getLine(r));)r--;if(g<r)return d=e.getLine(r).length,new Range(g,n,r,d)}else if("end"===this.getFoldWidget(e,t,i)){for(var r=i,d=e.getLine(r).length;0<=--i&&!this.isHeading(e,i););n=e.getLine(i).length;return new Range(i,n,r,d)}}}.call(FoldMode.prototype);