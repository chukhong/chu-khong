"use strict";var oop=require("../../lib/oop"),BaseFoldMode=require("./fold_mode").FoldMode,Range=require("../../range").Range,FoldMode=exports.FoldMode=function(){};oop.inherits(FoldMode,BaseFoldMode),function(){this.getFoldWidgetRange=function(e,t,r){var o=this.indentationBlock(e,r);if(o)return o;var i=/\S/,o=(g=e.getLine(r)).search(i);if(-1!=o&&"#"==g[o]){for(var d,o=g.length,n=e.getLength(),a=r,s=r;++r<n;){var g,l=(g=e.getLine(r)).search(i);if(-1!=l){if("#"!=g[l])break;s=r}}return a<s?(d=e.getLine(s).length,new Range(a,o,s,d)):void 0}},this.getFoldWidget=function(e,t,r){var o=e.getLine(r),i=o.search(/\S/),d=e.getLine(r+1),n=e.getLine(r-1),a=n.search(/\S/),s=d.search(/\S/);if(-1==i)return e.foldWidgets[r-1]=-1!=a&&a<s?"start":"","";if(-1==a){if(i==s&&"#"==o[i]&&"#"==d[i])return e.foldWidgets[r-1]="",e.foldWidgets[r+1]="","start"}else if(a==i&&"#"==o[i]&&"#"==n[i]&&-1==e.getLine(r-2).search(/\S/))return e.foldWidgets[r-1]="start",e.foldWidgets[r+1]="";return e.foldWidgets[r-1]=-1!=a&&a<i?"start":"",i<s?"start":""}}.call(FoldMode.prototype);