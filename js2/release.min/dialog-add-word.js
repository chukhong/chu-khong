"use strict";!function(){var{}=require("data/boFull"),a=require("ace/lib/dom").buildDom,l=["từ kép","danh từ","động từ","tính từ","trạng từ","giới từ","trợ từ","phó từ"],e=()=>l.map(a=>{var e=a.replace(/\s/g,"-");return["div",{class:"mb-3 row"},["label",{class:"col-sm-3 form-label",for:e},a],["div",{class:"col-sm-7"},["input",{class:"form-control",type:"text",id:e,name:e,placeholder:a}]]]});var o,t,s,i;o=window.editor,e=["div",{class:"modal",id:"dialogAddWord",tabindex:"-1",role:"dialog","aria-labelledby":"dialogAddWordTitle","aria-hidden":"true"},["form",{id:"formAddWord",action:"#",method:"post"},["div",{class:"modal-dialog modal-lg",role:"document"},["div",{class:"modal-content bd-gray-900"},["div",{class:"modal-header navbar navbar-expand-lg"},["h2",{class:"modal-title mt-3 accordion-header",id:"headingOne"},["button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},"Add Word"],["div",{class:"modal-title spinner mx-3",style:"width:30px;height:30px",id:"spinnerDialogAddWord"},""]],["h2",{class:"modal-title px-3 mt-3 accordion-header",id:"headingTow"},["button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTow","aria-expanded":"false","aria-controls":"collapseOne"},"Inorder Translate"],["div",{class:"modal-title spinner mx-3",style:"width:30px;height:30px",id:"spinnerFormPriority"},""]],["button",{type:"button",class:"btn-close text-bg-info","data-bs-dismiss":"modal","aria-label":"Close"}]],["div",{class:"modal-body",id:"bodyDialogAddWord"},["div",{class:"accordion",id:"accordionExample"},["div",{class:"accordion-item"},["div",{id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},["div",{class:"accordion-body"},["div",{class:"mb-3 row"},["label",{class:"col-sm-3 col-form-label",for:"key-word"},"Key Word"],["div",{class:"col-sm-7"},["input",{class:"form-control",type:"text",id:"key",name:"key",placeholder:"Key Word"}]]],["div",{class:"mb-3 row"},["label",{class:"col-sm-3 col-form-label",for:"aliases"},"Aliases Word"],["div",{class:"col-sm-7"},["input",{class:"form-control",type:"text",id:"aliases",name:"aliases",placeholder:"Aliases Word"}]]],["input",{class:"form-control",type:"hidden",id:"shortMeaning",name:"shortMeaning",placeholder:"Aliases Word"}],e(),["div",{class:"mb-3"},["label",{class:"form-label",for:"full-meaning"},"Full meaning"],["textarea",{class:"form-control",row:"3",id:"fullMeaning",name:"fullMeaning",placeholder:"Full meaning"}]],["div",{class:"modal-footer"},["button",{type:"submit",class:"btn btn-primary","aria-label":"Save","data-bs-dismiss":"modal"},"Save"],["button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Close"]]]]],["div",{id:"collapseTow",class:"accordion-collapse collapse","aria-labelledby":"headingTow","data-bs-parent":"#accordionExample"},["div",{class:"accordion-body",id:"accordionBodyInorderTranslate"},""]]]]]]]],t=document.querySelector("body"),s=document.createElement("div"),a(e,s,{}),t.insertBefore(s,t.firstChild),require("lib/dialog-users-translate"),i={_getUserData:a=>{navigator.onLine?fetch("/dictionaries/get/"+a,{headers:{"Content-Type":"application/json"},method:"get"}).then(a=>a.json()).then(a=>{if(Array.isArray(a)){if(0!=a.length){a[0][1];var e=a[0][3],o=a[0][4],t=a[0][5];if(console.log(a),-1!=o.indexOf("{")){var l,s=JSON.parse(o);for(l in console.log(s),s)$("#"+l).val(s[l])}$("#fullMeaning").val(t),$("#aliases").val(e)}}else $("#dialogAddWord").modal("hide"),$("#app-toast .toast-header strong").html("Error"),$("#app-toast .toast-body").html(a.sms),$("#app-toast").toast("show")}).catch(a=>{$("#app-toast .toast-header strong").html("Error"),$("#app-toast .toast-body").html(a),$("#app-toast").toast("show")}):app.toast.message("Alert","internet is off").show()},_getUserDataV2(a){var t,l;navigator.onLine?((t=document.getElementById("spinnerDialogAddWord")).style.visibility="visible",a=script_url+"?q="+JSON.stringify({SHEETNAME:SHEETNAME,action:"filter",data:{ID:a,USERID:USERID}}),l={},fetch(a,{method:"GET",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(a=>a.json()).then(a=>{if(t.style.visibility="hidden","success"==a.status){var e,o=(l=JSON.parse(a.data[0].JSONDATA)).shortMeaning;for(e in o)$("#"+e).val(o[e]);$("#aliases").val(l.aliases),$("#fullMeaning").val(l.fullMeaning)}})):app.toast.message("Alert","internet is off").show()},addWord:()=>{window.USERID?(i._getUserDataV2(o.getSelectedText()),$("#formAddWord input,textarea").val(""),$("#dialogAddWord").modal("show"),$("#key").val(o.getSelectedText())):app.toast.message("Error","You must login").show()}},$(document).on("click","[data-cmd-as]",function(a){var e=$(this).data("cmdAs");i[e]&&i[e](a)}),d.init(function(){$("#formAddWord").on("submit",a=>{o={},l.map(a=>{var a=a.replace(/\s/g,"-"),e=$("#"+a).val().trim();""!=e&&(o[a]=e)}),$("#shortMeaning").val(""),t={},["key","aliases","fullMeaning"].map(a=>{var e=$("#"+a).val().trim();t[a]=e}),t.shortMeaning=o;var o,t,e=t,a=(a.preventDefault(),console.log(e),script_url+"?q="+JSON.stringify({SHEETNAME:SHEETNAME,action:"insert",condition:{ID:e.key,USERID:USERID},data:{ID:e.key,KEY:e.key,LENGTH:e.key.length,JSONDATA:JSON.stringify(e),USERID:USERID}}));return fetch(a,{method:"GET",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(a=>a.json()).then(a=>{}),!1})}),$("#dialogAddWord").on("shown.bs.modal",()=>{i.addWord()})}();