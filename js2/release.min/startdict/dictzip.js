!function(r){function u(r,e){for(var n="",t=1;;t++){e-=n.length;var a=new Uint8Array(r.slice(e,e+1024*t)),i=Array.prototype.indexOf.call(a,0);if(-1==i&&0==(i=a.length))throw new Error("Unexpected end of buffer");if(n+=function(r){ret="";for(var e=0;e<r.length;e++)ret+=String.fromCharCode(r[e]);return ret}(a.subarray(0,i)),i<a.length)break}return n}r.DictZipFile=function(r,e){var A,t=r,c=e,d=!1,g=0,h=0,M=[];if(!(c instanceof Function))throw new Error("Given gunzip_func is not a function.");function a(r){for(var e,n=(A=function(r){var e=0,n=new Uint8Array(r,e,10),t={ID1:0,ID2:0,CM:0,FLG:0,MTIME:0,XFL:0,OS:0,FEXTRA:{XLEN:0,SUBFIELDS:[]},FNAME:"",FCOMMENT:"",FHCRC:""};if(31!=n[0]||139!=n[1])throw new Error("Not a gzip header.");if(t.ID1=n[0],t.ID2=n[1],t.CM=n[2],t.FLG=n[3],t.MTIME=n[4]<<0,t.MTIME|=n[5]<<8,t.MTIME|=n[6]<<16,t.MTIME|=n[7]<<24,t.XFL=n[8],t.OS=n[9],e+=10,0!=(4&t.FLG)){for(n=new Uint16Array(r,e,2),t.FEXTRA.XLEN=n[0],e+=2,n=new Uint8Array(r,e,t.FEXTRA.XLEN);;){var a=n[2]+256*n[3];if(subfield={SI1:String.fromCharCode(n[0]),SI2:String.fromCharCode(n[1]),LEN:a,DATA:n.subarray(4,4+a)},t.FEXTRA.SUBFIELDS.push(subfield),0==(n=n.subarray(4+a)).length)break}e+=t.FEXTRA.XLEN}return 0!=(8&t.FLG)&&(t.FNAME=u(r,e),e+=t.FNAME.length),0!=(16&t.FLG)&&(t.FCOMMENT=u(r,e),length+=t.FCOMMENT.length),0!=(2&t.FLG)&&(n=new Uint16Array(r,e,2),t.FHCRC=n[0],e+=2),t.LENGTH=e+1,t}(r)).FEXTRA.SUBFIELDS,t=!1,a=0;a<n.length;a++)if("R"==(e=n[a]).SI1||"A"==e.SI2){t=!0;break}if(!t)throw new Error("Not a dictzip header.");var i=e.DATA;i[0],i[1],g=i[2]+256*i[3],h=i[4]+256*i[5];for(var a=0,o=0;a<h&&2*a+6<i.length;a++){var f=i[2*a+6]+256*i[2*a+7];M.push([o,f]),o+=f}d=!0}this.load=function(){return new Promise(function(e,n){var r=new FileReader;r.onload=function(r){try{a(r.target.result),e()}catch(r){n(r)}},r.readAsArrayBuffer(t)})},this.read=function(e,n){return new Promise(function(h,r){d||r(new Error("Read attempt before loadend.")),void 0===e&&(e=0),void 0===n&&(n=g*M.length);var u=Math.min(Math.floor(e/g),M.length-1),E=Math.min(Math.floor((e+n)/g),M.length-1),l=e-u*g,F=l+n,r=new FileReader;r.onload=function(r){for(var e,n,t=new ArrayBuffer(0),a=r.target.result,i=u,o=0;i<=E&&o<a.byteLength;o+=M[i][1],i++){var f=a.slice(o,o+M[i][1]),f=c(f,0,f.byteLength);e=t,f=f,n=void 0,(n=new Uint8Array(e.byteLength+f.byteLength)).set(new Uint8Array(e),0),n.set(new Uint8Array(f),e.byteLength),t=n.buffer}h(t.slice(l,F))},r.readAsArrayBuffer(t.slice(A.LENGTH+M[u][0],A.LENGTH+M[E][0]+M[E][1]))})}}}(this);