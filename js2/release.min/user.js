"use strict";!function(){var e=require("ace/lib/dom").buildDom,t=require("lib/jwt-decode")["jwt_decode"];function o(e){var t=e+"=",s=decodeURIComponent(document.cookie).split(";");for(let o=0;o<s.length;o++){let e=s[o];for(;" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return""}function s(e){var e=t(e.credential),o=script_url+"?q="+JSON.stringify({SHEETNAME:"users",action:"login",condition:{EMAIL:e.email},data:{EMAIL:e.email,NAME:e.name}});fetch(o,{method:"GET",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(e=>e.json()).then(e=>{console.log(e),cookieStore.set("session-userinfor",JSON.stringify(e.message)),window.USERID=e.message.uuid}),cookieStore.set("session-token2",JSON.stringify(e)),cookieStore.get("session-token2").then(e=>{e=JSON.parse(e.value),$("#dialogUser h5")[0].innerHTML=e.name,$("#userIcon")[0].src=e.picture,$("#buttonDiv").hide()}).catch(e=>{app.toast.message("Error",e.message).show()})}window.jwt_decode=t,window.getCookie=o;window.editor,a=document.querySelector("body"),i=document.createElement("div"),e(["div",{class:"offcanvas offcanvas-end","data-bs-backdrop":"static",tabindex:"-1",id:"dialogUser","aria-labelledby":"staticBackdropLabel"},["div",{class:"offcanvas-header"},["h5",{class:"offcanvas-title",id:"staticBackdropLabel"},"user info"],["button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},""]],["div",{class:"offcanvas-body menu list-group list-group-flush scrollarea"},["div",{id:"buttonDiv",class:"list-group-item py-3 lh-sm"}],["div",{class:""},["i",{class:"material-icons"},"color_lens"],["span",{class:"mx-3"},"Setting"]],["div",{id:"settingPlace",class:"px-3 py-3"}],["button",{class:"list-group-item py-3 lh-sm","data-bs-toggle":"modal","data-bs-target":"#selectDicts"},["i",{class:"material-icons"},"language"],["span",{class:"mx-3"},"Choose Dictionaries"]],["div",{class:"px-2",id:"appversion"},""]]],i,{}),a.insertBefore(i,a.firstChild),require("lib/dialog-setting"),cookieStore.get("session-token2").then(e=>{e=JSON.parse(e.value);$("#dialogUser h5")[0].innerHTML=e.name,$("#userIcon")[0].src=e.picture,$("#userIcon")[0].src=e.picture,$("#buttonDiv").hide()}).catch(e=>{app.toast.message("Error",e.message).show()}),cookieStore.get("session-userinfor").then(e=>{e&&e.value&&(e=JSON.parse(e.value),window.USERID=e.uuid)});var i=o("session-token2");if(navigator.onLine){try{null==google&&location.reload()}catch(e){location.reload()}""==i&&(google.accounts.id.initialize({client_id:"563587575029-89224il8qt9bc2i5d3f15fucn6nutv0t.apps.googleusercontent.com",callback:s}),google.accounts.id.renderButton(document.getElementById("buttonDiv"),{theme:"outline",size:"large"}),google.accounts.id.prompt())}var a=localStorage.getItem("app.version")||"1.1.1";d.id("appversion").innerHTML="Chu Khong Version: "+a}();