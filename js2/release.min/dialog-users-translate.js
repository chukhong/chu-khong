"use strict";window.cacheInorderTranslate=null,window.cacheAffterInorderTranslate=null,function(){require("tablednd");var o=require("ace/lib/dom").buildDom;var n=t=>t.map((t,e)=>["tr",{class:""},["td",{"data-id":t.ID},t.NAME]]);function d(t){spinnerFormPriority.style.visibility="hidden";var e=$("#table"),t=n(t),a=document.querySelector("#table tbody");a.innerHTML="",o(t,a,{}),e.tableDnD()}var t,e;window.editor,t=document.querySelector("#accordionBodyInorderTranslate"),e=document.createElement("div"),o(["div",{},["form",{id:"formPriority",action:"#",method:"post"},["div",{class:"modal-body",id:"bodyDialogSystemWords"},["table",{id:"table","data-toggle":"table","data-pagination":"true","data-search":"false","data-show-toggle":"true","data-toolbar":".toolbar","data-use-row-attr-func":"true","data-reorderable-rows":"true",class:"text-light"},["thead",{},["tr",{},["th",{"data-field":"NAME","data-sortable":"true"},"Name"]]],["tbody",{},""]]],["div",{class:"modal-footer"},["button",{type:"submit",class:"btn btn-primary","aria-label":"Save","data-bs-dismiss":"modal"},"Save"],["button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Close"]]]],e,{}),t.insertBefore(e,t.firstChild),$("#dialogAddWord").on("shown.bs.modal",function(){var t;document.getElementById("spinnerFormPriority").style.visibility="visible",null!=cacheInorderTranslate?d(cacheInorderTranslate):(t=script_url+"?q="+JSON.stringify({SHEETNAME:"users",action:"filter",data:{}}),fetch(t,{method:"GET",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(t=>t.json()).then(a=>{var t=script_url+"?q="+JSON.stringify({SHEETNAME:"priority",action:"filter",data:{USERID:USERID}});fetch(t,{method:"GET",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(t=>t.json()).then(t=>{e=a.data,o=t.data;var e,o,t=e.map(e=>{var t=e,a=100,r=o.filter(t=>t.USERORTHER==e.ID);return 0<r.length&&(a=r[0].PRIORITY),t.PRIORITY=a,t});t.sort((t,e)=>t.PRIORITY-e.PRIORITY),d(cacheInorderTranslate=t)})}),$("#formPriority").on("submit",t=>{t.preventDefault();var t=document.querySelector("#table tbody").querySelectorAll("td"),a=[];t.forEach((t,e)=>{e={USERID:USERID,USERORTHER:t.dataset.id,PRIORITY:e+1},a.push(e),t=script_url+"?q="+JSON.stringify({SHEETNAME:"priority",action:"insert",condition:{USERID:USERID,USERORTHER:t.dataset.id},data:e});fetch(t,{method:"GET",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(t=>t.json()).then(t=>{console.log(t)})}),cacheAffterInorderTranslate=a,console.log(cacheAffterInorderTranslate),cacheAffterInorderTranslate.map(e=>{e.USERORTHER,(r=cacheInorderTranslate.find(t=>t.ID==e.USERORTHER))&&(r.PRIORITY=e.PRIORITY)}),cacheInorderTranslate.sort((t,e)=>t.PRIORITY-e.PRIORITY)}))})}();