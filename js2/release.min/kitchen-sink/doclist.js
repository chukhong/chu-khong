"use strict";var EditSession=require("ace/edit_session").EditSession,UndoManager=require("ace/undomanager").UndoManager,net=require("ace/lib/net"),modelist=require("ace/ext/modelist"),fileCache={};function initDoc(e,o,s){s.prepare&&(e=s.prepare(e));e=new EditSession(e),e.setUndoManager(new UndoManager),s.session=e,s.path=o,e.name=s.name,s.wrapped&&(e.setUseWrapMode(!0),e.setWrapLimitRange(80,80)),s=modelist.getModeForPath(o);return e.modeName=s.name,e.setMode(s.mode),e}function makeHuge(e){for(var o=0;o<5;o++)e+=e;return e}var docs={"docs/javascript.js":{order:1,name:"JavaScript"},"docs/latex.tex":{name:"LaTeX",wrapped:!0},"docs/markdown.md":{name:"Markdown",wrapped:!0},"docs/mushcode.mc":{name:"MUSHCode",wrapped:!0},"docs/pgsql.pgsql":{name:"pgSQL",wrapped:!0},"docs/plaintext.txt":{name:"Plain Text",prepare:makeHuge,wrapped:!0},"docs/sql.sql":{name:"SQL",wrapped:!0},"docs/textile.textile":{name:"Textile",wrapped:!0},"docs/c9search.c9search_results":"C9 Search Results","docs/mel.mel":"MEL"},ownSource={},hugeDocs=require.toUrl?{"build/src/ace.js":"","build/src-min/ace.js":""}:{"src/ace.js":"","src-min/ace.js":""};if(modelist.modes.forEach(function(e){var o=e.extensions.split("|")[0],o="^"===o[0]?o.substr(1):e.name+"."+o;docs[o="docs/"+o]?"object"!=typeof docs[o]||docs[o].name||(docs[o].name=e.caption):docs[o]={name:e.caption}}),window.require&&window.require.s)try{for(var path in window.require.s.contexts._.defined)-1!=path.indexOf("!")?path=path.split("!").pop():path+=".js",ownSource[path]=""}catch(e){}function sort(e){return e.sort(function(e,o){return(o.order||0)-(e.order||0)||e.name&&e.name.localeCompare(o.name)})}function prepareDocList(e){var o,s=[];for(o in e){var a=e[o];(a="object"!=typeof a?{name:a||o}:a).path=o,a.desc=a.name.replace(/^(ace|docs|demo|build)\//,""),18<a.desc.length&&(a.desc=a.desc.slice(0,7)+".."+a.desc.slice(-9)),fileCache[a.name.toLowerCase()]=a,s.push(a)}return s}function loadDoc(e,o){var s,a=fileCache[e.toLowerCase()];return a?a.session?o(a.session):("docs"==(e=(s=a.path).split("/"))[0]?s="demo/kitchen-sink/"+s:"ace"==e[0]&&(s="lib/"+s),void net.get(s,function(e){initDoc(e,s,a),o(a.session)})):o(null)}function saveDoc(e,o){var s=e;if(!(s="string"==typeof e?fileCache[e.toLowerCase()]:s)||!s.session)return o("Unknown document: "+e);var e=s.path,a=e.split("/");"docs"==a[0]?e="demo/kitchen-sink/"+e:"ace"==a[0]&&(e="lib/"+e),upload(e,s.session.getValue(),o)}function upload(e,o,s){var a=net.qualifyURL(e);if(e=a=/^file:/.test(a)?"http://localhost:8888/"+e:a,!/^https?:/.test(e))return s(new Error("Unsupported url scheme"));var t=new XMLHttpRequest;t.open("PUT",e,!0),t.onreadystatechange=function(){4===t.readyState&&s(!/^2../.test(t.status))},t.send(o)}module.exports={fileCache:fileCache,docs:sort(prepareDocList(docs)),ownSource:prepareDocList(ownSource),hugeDocs:prepareDocList(hugeDocs),initDoc:initDoc,loadDoc:loadDoc,saveDoc:saveDoc},module.exports.all={"Mode Examples":module.exports.docs,"Huge documents":module.exports.hugeDocs,"own source":module.exports.ownSource};